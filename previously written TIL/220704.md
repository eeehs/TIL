# 그림으로 공부하는 IT 인프라 구조

5. 인프라를 지탱하는 응용 이론 


## 저널링

저널(Journal)은 **트랜잭션이나 매일 갱신되는 데이터의 변경 이력**을 가리킴

저널을 남겨 두는 것을 **저널링(Journaling)**이라고 함

- 특징
    - 데이터 자체가 아닌 처리**(트랜잭션)** 내용을 기록한다.
    - 데이터 일관성이나 일치성이 확보되면 필요 없어진다.
    - 데이터 복구 시 롤백(Rollback),롤포워드(Rollforward)에 이용된다.
    
- 저널링 장점 및 주의점
    - 장점
        - 시스템 장애 시 복구가 빠르다.
        - 데이터 복제보다도 적은 리소스를 소비해서 데이터를 보호할 수 있다.
    - 주의점
        - 저널 데이터는 메모리의 버퍼에 일단 저장된다. 이 정보가 디스크에 기록되지 않으면 장애 시에 잃을 수 있다. 이 때문에 시스템 요건에 따라 버퍼의 디스크 기록 시점을 검토, 조정해야한다.
        - 저널은 트랜잭션 단위로 일치성을 보증하기 때문에 트랜잭션 도중에 장애가 발생하면 종료되지 않는 트랜잭션은 파괴된다. 하나의 트랜잭션 단위가 크면 드랜잭션 도중에 장애가 발생할 가능성이 높다. 따라서 트랜잭션이 길어지지 않도록 설계해야한다.
        

## 복제

복사본을 만드는 것을 의미 

- 특징
    - 장애 시 데이터 손실을 예방할 수 있다.
    - 복제를 이용한 부하분산이 가능하다.
- 주의사항
    - 복제위치가 많으면 갱신이 많은 시스템과 같이 복제 오버헤드가 높아진다.
    - 실제 데이터와 복제 데이터를 완전히 일치 시키고 싶으면 복제 데이터의 쓰기 완료 처리를 보장해야한다.
    - 시스템 유지관리나 장애 시에는 복제 데이터도 고려해야 하므로 설계나 운용 난이도가 높아질 수 있다.
    - 복제 데이터와 실제 데이터의 차이가 커지면 그 차이를 채우기 위한 시간이나 성능도 고려해야한다.

## 마스터-워커

- 마스터-워커는 상호 접속 관계의 일종으로, 한 사람이 관리자가 돼서 모든 것을 제어한다.
- 마스터-워커의 반대가 피어 투 피어(각자 관리)다.

- 장점
    - 관리자가 한 명이기 때문에 구현이 쉽다
    - 워커 간 처리를 동기화할 필요가 없기 때문에 통신량이 줄어든다.
- 단점
    - 마스터가 없어지면 관리할 수 없다.
    - 마스터의 부하가 높아진다.

## 압축

압축의 기본은 ‘중복 패턴 인식’과 그것을 ‘변경’하는 것 

압축한 데이터를 원래대로 복원할 수 있는 **가역 압축**과 이미지나 음성 데이터 등에 있는 사람이 인식할 수 없는 부분을 생략하는 **비가역 압축**이 있다.